(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1466:function(e,t,s){Promise.resolve().then(s.bind(s,4258))},4258:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var n,l,r=s(7437),i=s(2265);(n=l||(l={}))[n.Init=0]="Init",n[n.Loading=1]="Loading",n[n.Error=2]="Error",n[n.Ready=3]="Ready";let a=(0,i.createContext)({});function c(e){let{src:t,children:s}=e,[n,c]=(0,i.useState)({state:l.Init,puzzles:[],character:null,final:{title:"",message:"",speech:"",image:""}});return(0,i.useEffect)(()=>{switch(console.log("State: ".concat(l[n.state]),n),n.state){case l.Init:c({...n,state:l.Loading});break;case l.Loading:fetch(t).then(e=>e.json()).then(e=>c({...n,...e,state:l.Ready})).catch(e=>{console.error(e),c({...n,state:l.Error})});case l.Error:case l.Ready:}},[n.state]),(0,r.jsx)(a.Provider,{value:n,children:s})}var d=s(3839);function o(e){let{puzzles:t,final:s,firstUnsolved:n,speech:l}=e;return(0,r.jsxs)(r.Fragment,{children:[null!==n&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{padding:5},children:[(0,r.jsx)("h2",{children:t[n].title}),(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:t[n].clue}}),(0,r.jsx)("p",{children:(0,r.jsx)("img",{src:t[n].image,alt:t[n].title,style:{width:"100%",height:"auto"}})})]})}),null===n&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{padding:5},children:[(0,r.jsx)("h2",{children:s.title}),(0,r.jsx)("p",{children:s.message}),(0,r.jsx)("img",{src:s.image,alt:s.title,style:{width:"100%",height:"auto"}})]})})]})}var h=s(8597),u=s(4434),x=s(4993),g=s(6716);function j(e){let{puzzle:t,index:s,onSuccess:n,onFailure:l,firstUnsolved:a}=e,[c,d]=(0,i.useState)("");return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{padding:5},children:[(0,r.jsx)("b",{children:t.title}),t.solved&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h.Z,{children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)("b",{style:{color:"green"},children:"Solved!"})," ",t.answer]})})}),s===a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(u.Z,{xs:"auto",children:(0,r.jsx)(x.Z.Text,{className:"text-muted",children:t.hint})})}),(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(u.Z,{children:(0,r.jsx)(x.Z.Control,{type:"text",placeholder:"Answer",value:c,onChange:e=>{d(e.target.value)}})}),(0,r.jsx)(u.Z,{xs:"auto",children:(0,r.jsx)(g.Z,{variant:t.variant,type:"submit",onClick:e=>{e.preventDefault(),0===c.trim().localeCompare(t.answer.trim(),void 0,{sensitivity:"base"})?n(s,t):l(s,t)},children:"Submit"})})]})]})]})})}var p=s(9291);function m(e){let{character:t,speech:s}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(u.Z,{xs:"9",sm:"10",lg:"11",children:!!s&&(0,r.jsx)(p.Z,{variant:"light",children:s})}),(0,r.jsx)(u.Z,{xs:"3",sm:"2",lg:"1",children:(0,r.jsx)("img",{className:"rounded-circle shadow-4-strong",src:t.image,alt:t.name,style:{width:"100%"}})})]})})}function v(){let e=(0,i.useContext)(a),[t,s]=(0,i.useState)([]),[n,c]=(0,i.useState)(null),[h,u]=(0,i.useState)(null);(0,i.useEffect)(()=>{console.log("Resetting active puzzles",e.puzzles),s([...e.puzzles])},[e.puzzles]),(0,i.useEffect)(()=>{let s=t.find(e=>!e.solved);c(s?t.indexOf(s):null),t.length>0&&void 0===s&&u(e.final.speech)},[t]);let x=(e,n)=>{console.log("Solved puzzle",e,n),t[e].solved=!0,s([...t]),u("Oh well done!")},g=(e,t)=>{console.log("Incorrect solution for puzzle",e,t),u("Oh no, that's not right!")};return(0,r.jsx)(r.Fragment,{children:e.state===l.Ready&&(0,r.jsx)("div",{style:{width:"90%",paddingTop:20,paddingBottom:20},children:(0,r.jsxs)(d.Z,{gap:3,children:[e.character&&(0,r.jsx)(m,{character:e.character,speech:h}),(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{src:"".concat("/2023-gift-o-matic","/holly.png"),alt:"decorative holly",style:{maxWidth:"30%"}}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{style:{border:"solid 2px black",backgroundColor:"#aa3333",padding:10,borderRadius:15},className:"shadow",children:(0,r.jsx)("div",{style:{backgroundColor:"white",padding:10,borderRadius:10,color:"#333333"},children:(0,r.jsx)(o,{puzzles:t,final:e.final,firstUnsolved:n,speech:h})})})]}),(0,r.jsx)("div",{style:{border:"solid 2px black",backgroundColor:e.puzzles[null!=n?n:0].colour,padding:10,borderRadius:15},className:"shadow",children:(0,r.jsx)("div",{style:{backgroundColor:"white",padding:10,borderRadius:10,color:"#333333"},children:t.map((e,t)=>(0,r.jsx)(j,{puzzle:e,index:t,onSuccess:x,onFailure:g,firstUnsolved:n},"puzzle-".concat(e.id)))})})]})})})}function f(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c,{src:"".concat("/2023-gift-o-matic","/game.json"),children:(0,r.jsx)(v,{})})})}}},function(e){e.O(0,[909,971,938,744],function(){return e(e.s=1466)}),_N_E=e.O()}]);